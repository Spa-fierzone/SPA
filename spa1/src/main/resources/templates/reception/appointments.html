<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Quản lý Lịch Hẹn - SpaZone</title>
  <!-- Google Fonts: Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    :root {
      --primary-pink: #ff6b9d;
      --light-pink: #ff8fab;
      --pastel-pink: #ffb6c1;
      --pastel-light: #ffe4ec;
      --pastel-bg: #fff0f6;
    }

    body {
      background: linear-gradient(135deg, var(--pastel-bg) 0%, var(--pastel-light) 60%, #fdfbfb 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      font-family: 'Poppins', sans-serif;
      position: relative;
      overflow-x: hidden;
      animation: gradientShift 15s infinite alternate;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }

    /* Floating Bubbles */
    .bubble {
      position: absolute;
      border-radius: 50%;
      background: rgba(255,182,193,0.13);
      animation: float 8s infinite ease-in-out;
      z-index: 0;
    }

    @keyframes float {
      0%,100% { transform: translateY(0);}
      50% { transform: translateY(-32px);}
    }

    /* Glassmorphism Navbar */
    .navbar {
      background: rgba(255,255,255,0.85) !important;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-bottom: 1.5px solid rgba(255,182,193,0.18);
      box-shadow: 0 2px 8px rgba(255,182,193,0.08);
    }

    .navbar-brand {
      color: var(--primary-pink) !important;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    /* Glassmorphism Card */
    .glass-card {
      background: rgba(255,255,255,0.7);
      border-radius: 22px;
      box-shadow: 0 8px 32px 0 rgba(31,38,135,0.10);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255,182,193,0.18);
      padding: 2rem;
      animation: floatCard 4s infinite ease-in-out;
    }

    @keyframes floatCard {
      0%, 100% { transform: translateY(0);}
      50% { transform: translateY(-8px);}
    }

    h2 {
      color: var(--primary-pink);
      font-weight: 700;
      text-align: center;
      margin-bottom: 1.5rem;
      position: relative;
      display: inline-block;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.5);
      padding: 0.5rem 1.5rem;
      border-radius: 30px;
      box-shadow: 0 4px 12px rgba(255,182,193,0.12);
    }

    /* Table Styling */
    .table-container {
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 4px 16px rgba(255,182,193,0.08);
    }

    table {
      background: rgba(255,255,255,0.4);
      backdrop-filter: blur(5px);
    }

    thead tr {
      background: linear-gradient(90deg, var(--pastel-pink), var(--pastel-light)) !important;
      color: white;
    }

    th {
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    tbody tr {
      transition: transform 0.3s, background 0.3s;
      background: rgba(255,255,255,0.6);
    }

    tbody tr:hover {
      transform: translateY(-2px);
      background: rgba(255,255,255,0.9) !important;
      box-shadow: 0 4px 12px rgba(255,182,193,0.15);
    }

    /* Button Effects */
    .btn-checkin, .btn-checkout {
      position: relative;
      overflow: hidden;
      border: none;
      border-radius: 14px;
      font-weight: 600;
      padding: 0.5rem 1.2rem;
      box-shadow: 0 4px 12px rgba(255,182,193,0.15);
      transition: transform 0.3s, box-shadow 0.3s;
      z-index: 1;
    }

    .btn-checkin {
      background: linear-gradient(90deg, var(--primary-pink), var(--light-pink));
      color: white;
    }

    .btn-checkout {
      background: linear-gradient(90deg, var(--light-pink), var(--pastel-pink));
      color: white;
    }

    .btn-checkin:before, .btn-checkout:before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      transition: 0.5s;
      z-index: -1;
    }

    .btn-checkin:hover:before, .btn-checkout:hover:before {
      left: 100%;
    }

    .btn-checkin:hover, .btn-checkout:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 20px rgba(255,139,171,0.25);
    }

    /* Footer */
    footer {
      margin-top: auto;
      background-color: rgba(255,255,255,0.85);
      backdrop-filter: blur(10px);
      border-top: 1.5px solid rgba(255,182,193,0.18);
      padding: 1.2rem 0;
      text-align: center;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .glass-card { padding: 1.5rem; }
      h2 { font-size: 1.4rem; padding: 0.4rem 1rem; }
      .btn-checkin, .btn-checkout { padding: 0.4rem 0.8rem; font-size: 0.9rem; }
    }
  </style>
</head>
<body>
<!-- Floating Bubbles -->
<div id="bubbles"></div>

<!-- Header -->
<nav class="navbar navbar-expand-lg navbar-light shadow-sm">
  <div class="container">
    <a class="navbar-brand fw-bold" th:href="@{/dashboard}">
      <i class="fas fa-spa me-2"></i>SpaZone
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarContent" aria-controls="navbarContent"
            aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarContent">
      <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item me-2">
          <a th:href="@{/profile}" class="btn btn-outline-primary">
            <i class="bi bi-person-circle me-1"></i> Hồ sơ
          </a>
        </li>
        <li class="nav-item">
          <form th:action="@{/logout}" method="post" class="d-inline">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button type="submit" class="btn btn-outline-danger">
              <i class="bi bi-box-arrow-right me-1"></i> Đăng xuất
            </button>
          </form>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Main Content -->
<div class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0">Lịch hẹn hôm nay</h2>
    <a href="/reception/appointments/create" class="btn btn-outline-primary">
      <i class="bi bi-plus-circle me-1"></i> Tạo lịch hẹn
    </a>
  </div>
  <div class="glass-card">
    <div class="table-container">
      <table class="table table-hover align-middle">
        <thead>
        <tr>
          <th><i class="fas fa-user me-1"></i> Khách hàng</th>
          <th><i class="fas fa-spa me-1"></i> Dịch vụ</th>
          <th><i class="fas fa-clock me-1"></i> Giờ hẹn</th>
          <th><i class="fas fa-info-circle me-1"></i> Trạng thái</th>
          <th><i class="fas fa-cogs me-1"></i> Thao tác</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="appt : ${appointments}" class="appointment-row">
          <td th:text="${appt.customer.fullName}">Tên</td>
          <td th:text="${appt.service.name}">Dịch vụ</td>
          <td th:text="${#temporals.format(appt.appointmentDate, 'HH:mm')}">Giờ</td>
          <td>
            <span class="badge rounded-pill"
                  th:classappend="${appt.status == 'scheduled'} ? 'bg-warning' : (${appt.status == 'CHECKED_IN'} ? 'bg-primary' : 'bg-success')"
                  th:text="${appt.status == 'scheduled'} ? 'Đã đặt' : (${appt.status == 'CHECKED_IN'} ? 'Đã đến' : 'Hoàn thành')">
              Trạng thái
            </span>
          </td>
          <td>
            <a th:href="@{'/appointments/edit/' + ${appt.appointmentId}}" class="btn btn-sm btn-outline-secondary me-1">
              <i class="bi bi-pencil-square"></i> Sửa phòng
            </a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Footer -->
<footer>
  <div class="container">
    <span class="text-muted">© 2025 SpaZone. All rights reserved.</span>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Floating Bubbles
  function createBubbles() {
    const container = document.createElement('div');
    container.id = 'bubbles';
    document.body.appendChild(container);
    for (let i = 0; i < 12; i++) {
      const bubble = document.createElement('div');
      bubble.className = 'bubble';
      const size = Math.random() * 40 + 20;
      bubble.style.width = `${size}px`;
      bubble.style.height = `${size}px`;
      bubble.style.left = `${Math.random() * 100}%`;
      bubble.style.top = `${Math.random() * 100}%`;
      bubble.style.animationDelay = `${Math.random() * 8}s`;
      container.appendChild(bubble);
    }
  }
  createBubbles();

  // Row animation
  document.querySelectorAll('.appointment-row').forEach((row, index) => {
    row.style.opacity = '0';
    row.style.transform = 'translateY(20px)';
    setTimeout(() => {
      row.style.transition = 'opacity 0.5s, transform 0.5s';
      row.style.opacity = '1';
      row.style.transform = 'translateY(0)';
    }, 150 * index);
  });
</script>
</body>
</html>
